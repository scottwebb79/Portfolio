<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8">
<meta name="Author" content="Scott C. Webb"/>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" type="text/css" href="dataEntry.css"/>
<link rel="stylesheet" type="text/css" href="https://use.fontawesome.com/releases/v5.12.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Alfa+Slab+One&family=Open+Sans:wght@600&display=swap">

<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<title>MACCS-IS: Data Entry</title>

</head>

<body>
<main>
    
    <div class="dataEntry_Container" id="container">
        <header class="container_header" id="container_header">
            <span class="header_align">
               <span class="h1">Live & Simulation Training Entry</span>
                <a href="../initial.html" class="close_btn">X</a>
            </span>
        </header>

        <div class="row">
            <div class="column">

                <form id="dataentry_form" autocomplete="on" method="POST" enctype="multipart/form-data">
                    <div class="entry_form" >
                        <fieldset name="student_info">
                        <legend class="left_Heading">Trainee Information</legend>
                        <label for="traineeName">Trainee:</label><input type="text" class="form_input" id="traineeName" placeholder="Rank LastName, FirstName" autofocus required /> <!-- I am aware that autofocus does not work within an iframe because of autofocus stealing concerns-->
                        <label for="traineeBillet">Trainee Billet:</label><select id="traineeBillet" class="form_input" required>
                            <option disabled selected value>-Select-</option>
                            <option value="ACR">ACR</option>
                            <option value="TARHR">TAR/HR</option>
                            <option value="TACDAS">TAC/DAS</option>
                            <option value="FSC">FSC</option>
                            <option value="IDM">IDM</option>
                            <option value="CC">CC</option>
                            <option value="HD">HD</option>
                            <option value="TAD">TAD</option>
                            <option value="SAD">SAD</option>
                            <option value="AVCOMM">AVCOMM</option>
                            <option value="TDS">TDS</option>
                            <option value="DCHF">DASC Chief</option>
                            <option value="DOIC">DASC OIC</option>
                            <option value="OTHER">Other</option>
                        </select><br>
                        <label for="traineeEmail">Trainee Email:</label><input type="email" class="form_input" id="traineeEmail" placeholder="trainee@domain.com" required /><br>
                        </fieldset>

                        <fieldset name="instructor_info">
                        <legend class="left_Heading">Instructor Information</legend>
                        <label for="instructorName">Instructor:</label><input type="text" class="form_input" id="instructorName" placeholder="Rank LastName, FirstName" required/><br>
                        <label for="instructorBillet">Instructor Billet:</label>
                        <select id="instructorBillet" class="form_input" required>
                            <option disabled selected value>-Select-</option>
                            <option value="instCC">CC</option>
                            <option value="instSAD">SAD</option>
                            <option value="instOBS">Observer</option>
                        </select>

                        <label for="instructorDesg">Instructor Desg:</label>
                        <select id="instructorDesg" class="form_input" required>
                            <option disabled selected value>-Select-</option>
                            <option value="instDesgBI">BI</option>
                            <option value="instDesgSI">SI</option>
                            <option value="instDesgFLC">FLC</option>
                            <option value="instDesgWTI">WTI</option>
                        </select><br>
                        
                        <label for="instEmail">Instructor Email:</label><input type="email" class="form_input" id="instEmail" placeholder="instructor@domain.com" required /><br>
                        </fieldset>

                        <fieldset name="Exercise_Info">
                        <legend class="left_Heading">Exercise / Deployment Information</legend>
                        <label for="exerciseName">Exercise:</label><input type="text" class="form_input" id="exerciseName" placeholder="Enter Exercise or Deployment Name" required/>
                        <label for="startDate">Start Date:</label><input type="date" class="form_input" id="startDate" value="" required>
                        <label for="endDate">End Date:</label><input type="date" class="form_input" id="endDate" value="" required><br>
                        </fieldset>

                        <fieldset>
                        <legend class="left_Heading">Performance Information</legend>
                        <div class="range-wrap">
                            <label for="range" style="margin-left: 20%">Rate overall performance on scale of 1 (Unsatisfactory) to 10 (Proficient):</label>
                            <input type="range" class="range" id="range" min="0" max="10">
                            <output class="bubble"></output>
                        </div>

                        <span class="left_Heading">Student Comments</span><br>
                        <textarea class="studentComment" placeholder="Enter student comments here!" maxlength="255" required></textarea><br>
                        <span class="left_Heading">Instructor Comments</span><br>
                        <textarea class="instructorComment" placeholder="Instructor comments should have the following: &#10 &#10 1) Exercise Description, &#10 2) Operation Summary, &#10 3) C2 Systems Utilized, &#10 4) Trainee Strengths, &#10 5) Trainee Weaknesses, &#10 6) Recommendations" required></textarea>
                        </fieldset>
                    </div>
                </form>

            </div>


            <div class="column">
                <div class="entry_form"></div>
                <form method="POST">
                    <div class="entry_form">
                        <span class="left_Heading">T&amp;R Events trained during Exercise/Deployment</span><br>
                        <div class="entry_form_left" id="dynamicInput">
                        </div>
                        <input type="button" value="Add Event" class="addEvent_btn" onclick="addInput('dynamicInput');">
                    </div>
                </form>
            </div>
        </div>

        <div class="container_footer">
            <input type="password" id="password" name="password" style="float:right; width: 115px; margin-top: 8px; margin-right: 10px; border: 1px solid #6666; border-radius: 4px;" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters" />
            <label for="password" style="float:right; margin-top: 10px; margin-right:10px;" id="pass_input">Enter User Passowrd to Submit:</label><br><br>
            <button type="submit" class="formSubmit_btn" form="dataentry_form">Submit</button>
            <button type="button" class="formCancel_btn">Cancel</button><br>
        </div>
    </div>

<!-- End of the Container-->
</main>


<!-- Script for range input increment bubble-->

<script>

const allRanges = document.querySelectorAll(".range-wrap");
allRanges.forEach(wrap => {
  const range = wrap.querySelector(".range");
  const bubble = wrap.querySelector(".bubble");

  range.addEventListener("input", () => {
    setBubble(range, bubble);
  });
  setBubble(range, bubble);
});

function setBubble(range, bubble) {
  const val = range.value;
  const min = range.min ? range.min : 0;
  const max = range.max ? range.max : 10;
  const newVal = Number(((val - min) *68.5) / (max - min));
  bubble.innerHTML = val;

  // Sorta magic numbers based on size of the native UI thumb
  bubble.style.left = `calc(${newVal}% + (${100 - newVal * .03}px))`;
}

</script>

<!--Script for adding Events into the right column-->

<script>
var counter = 1;
var limit = 18;
var divUnique = 0;
var radioName = 'radioName' + divUnique

function addInput(divName){
    divUnique++;
    var radioName = 'radioName' + divUnique
     if (counter == limit)  {
          alert("You have reached the limit of adding " + counter + " events");
     }
     else {
          var newdiv = document.createElement('div' + divUnique);
          newdiv.innerHTML = "<label style='margin-bottom: 1px;'>Event: </label><input type='text' name='myInputs[] + divUnique' class='event_input'>" +
                             "<input type='radio' style='margin-left: 35px;' name= radioName + '_U'></input><label>U</label>" +
                             "<input type='radio' name= radioName + '_1'> </input><label>1</label>" +
                             "<input type='radio' name= radioName + '_2'></input><label>2</label>" +
                             "<input type='radio' name= radioName + '_3'></input><label>3</label>" +
                             "<input type='radio' name= radioName + '_4'></input><label>4</label><br>";

          document.getElementById(divName).appendChild(newdiv);
          counter++;
     }
}

function display() {
    alert(divUnique);
}
</script>

<!--Script to make container draggable-->
<script>
    $( function() {
      $( "#container" ).draggable();
    } );
</script>

</body>

</html>
